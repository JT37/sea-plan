### Redis 应对数据量增多的两种方案
- 纵向扩展：升级单个 `Redis` 实例的资源配置，包括增加内存容量、增加磁盘容量、使用更高配置的 `CPU`。就像下图中，原来的实例内存是 `8GB`，硬盘是 `50GB`，纵向扩展后，内存增加到 `24GB`，磁盘增加到 `150GB`。
- 横向扩展：横向增加当前 `Redis` 实例的个数，就像下图中，原来使用 `1` 个 `8GB` 内存、`50GB` 磁盘的实例，现在使用三个相同配置的实例。

![Redis纵向扩展和横向扩展对比图](../../Picture/Redis纵向扩展和横向扩展对比图.jpeg)

#### 纵向扩展
优势：实施起来简单、直接。
问题：
- 当使用 `RDB` 对数据进行持久化时，如果数据量增加，需要的内存也会增加，主线程 `fork` 子进程时就可能会阻塞。
- 会受到硬件和成本的限制

#### 横向扩展
优势：扩展性更好。在面向百万、千万级别的用户规模时，横向扩展的 `Redis` 切片集群会是一个非常好的选择。
问题：
- 数据切片后，在多个实例之间如何分布？
- 客户端怎么确定想要访问的数据在哪个实例上？

`Redis3.0` 开始官方提供的集群方案 `Redis Cluster` 。`Redis Cluster` 方案中就规定了数据和实例的对应规则。

### Redis Cluster 进行切片集群

`Redis Cluster` 方案采用 `哈希槽（Hash Slot）`，来处理数据和实例之间的映射关系。在 `Redis Cluster` 方案中，一个切片集群共有 `16384` 个哈希槽，这些哈希槽类似于数据分区，每个键值对都会根据它的 `key`，被映射到一个哈希槽中。

