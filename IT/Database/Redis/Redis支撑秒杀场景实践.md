### 秒杀介绍

秒杀场景的业务特点是限时限量，业务系统要处理瞬时的大量高并发请求，而 `Redis` 就经常被用来支撑秒杀活动。

秒杀场景包含了多个环节，可以分成秒杀前、秒杀中和秒杀后三个阶段，每个阶段的请求处理需求并不相同，`Redis` 并不能支撑秒杀场景的每一个环节。

### 秒杀场景的负载特征对支撑系统的要求

#### 第一个特征是瞬时并发访问量非常高

一般数据库每秒只能支撑千级别的并发请求，而 `Redis` 的并发处理能力（每秒处理请求数）能达到万级别，甚至更高。所以，当有大量并发请求涌入秒杀系统时，我们就需要使用 `Redis` 先拦截大部分请求，避免大量请求直接发送给数据库，把数据库压垮。

#### 第二个特征是读多写少，而且读操作是简单的查询操作

在秒杀场景下，用户需要先查验商品是否还有库存（也就是根据商品 `ID` 查询该商品的库存还有多少），只有库存有余量时，秒杀系统才能进行库存扣减和下单操作。

库存查验操作是典型的键值对查询，而 `Redis` 对键值对查询的高效支持，正好和这个操作的要求相匹配。

### Redis 可以发挥作用的秒杀环节

#### 第一阶段是秒杀活动前

在这个阶段，用户会不断刷新商品详情页，这会导致详情页的瞬时请求量剧增。这个阶段的应对方案，一般是尽量把商品详情页的页面元素静态化，然后使用 `CDN` 或是浏览器把这些静态化的元素缓存起来。这样一来，秒杀前的大量请求可以直接由 `CDN` 或是浏览器缓存服务，不会到达服务器端了，这就减轻了服务器端的压力。

在这个阶段，有 `CDN` 和浏览器缓存服务请求就足够了，还不需要使用 `Redis`。